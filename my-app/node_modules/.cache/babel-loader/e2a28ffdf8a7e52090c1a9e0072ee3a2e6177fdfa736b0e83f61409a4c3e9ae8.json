{"ast":null,"code":"var _jsxFileName = \"/Users/ushbaybeibars/Documents/React-Nodejs-App/my-app/src/view/shared/routes/PrivateRoute.tsx\",\n  _s = $RefreshSig$();\nimport { useLocation, Route, Navigate } from \"react-router-dom\";\nimport PermissionChecker from \"../../../modules/auth/permissionChecker\";\nimport Layout from \"../../layout/Layout\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PrivateRoute(_ref) {\n  _s();\n  let {\n    component: Component,\n    currentUser,\n    permissionRequired,\n    ...rest\n  } = _ref;\n  const location = useLocation();\n  return /*#__PURE__*/_jsxDEV(Route, {\n    ...rest,\n    render: props => {\n      const permissionChecker = new PermissionChecker(currentUser);\n      if (!permissionChecker.isAuthenticated) {\n        return /*#__PURE__*/_jsxDEV(Navigate, {\n          to: {\n            pathname: '/auth/signin',\n            state: {\n              from: location\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 25\n        }, this);\n      }\n      if (!permissionChecker.isEmailVerified) {\n        return /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/auth/email-unverified\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 28\n        }, this);\n      }\n      if (!permissionChecker.match(permissionRequired)) {\n        return /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/403\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 28\n        }, this);\n      }\n      return /*#__PURE__*/_jsxDEV(Layout, {\n        ...props,\n        children: /*#__PURE__*/_jsxDEV(Component, {\n          ...props\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 21\n      }, this);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 9\n  }, this);\n}\n_s(PrivateRoute, \"pkHmaVRPskBaU4tMJuJJpV42k1I=\", false, function () {\n  return [useLocation];\n});\n_c = PrivateRoute;\nvar _c;\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"names":["useLocation","Route","Navigate","PermissionChecker","Layout","jsxDEV","_jsxDEV","PrivateRoute","_ref","_s","component","Component","currentUser","permissionRequired","rest","location","render","props","permissionChecker","isAuthenticated","to","pathname","state","from","fileName","_jsxFileName","lineNumber","columnNumber","isEmailVerified","match","children","_c","$RefreshReg$"],"sources":["/Users/ushbaybeibars/Documents/React-Nodejs-App/my-app/src/view/shared/routes/PrivateRoute.tsx"],"sourcesContent":["import { useLocation, Route, Navigate } from \"react-router-dom\";\nimport PermissionChecker from \"../../../modules/auth/permissionChecker\";\nimport Layout from \"../../layout/Layout\";\n\nexport default function PrivateRoute({\n    component: Component,\n    currentUser,\n    permissionRequired,\n    ...rest\n}) {\n    const location = useLocation();\n\n    return(\n        <Route\n            {...rest}\n            render={(props) => {\n                \n                const permissionChecker = new PermissionChecker(\n                    currentUser\n                );\n\n                if(!permissionChecker.isAuthenticated) {\n                    return (\n                        <Navigate\n                            to={{\n                                pathname: '/auth/signin',\n                                state: {from: location}\n                            }}\n                        />\n                    )   \n                }\n\n                if(!permissionChecker.isEmailVerified){\n                    return <Navigate to=\"/auth/email-unverified\" />\n                }\n\n                if(!permissionChecker.match(permissionRequired)) {\n                    return <Navigate to=\"/403\" />\n                }\n\n                return (\n                    <Layout {...props}>\n                        <Component {...props} />\n                    </Layout>\n                )\n            }}\n        />\n    )\n}"],"mappings":";;AAAA,SAASA,WAAW,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,kBAAkB;AAC/D,OAAOC,iBAAiB,MAAM,yCAAyC;AACvE,OAAOC,MAAM,MAAM,qBAAqB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzC,eAAe,SAASC,YAAYA,CAAAC,IAAA,EAKjC;EAAAC,EAAA;EAAA,IALkC;IACjCC,SAAS,EAAEC,SAAS;IACpBC,WAAW;IACXC,kBAAkB;IAClB,GAAGC;EACP,CAAC,GAAAN,IAAA;EACG,MAAMO,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAE9B,oBACIM,OAAA,CAACL,KAAK;IAAA,GACEa,IAAI;IACRE,MAAM,EAAGC,KAAK,IAAK;MAEf,MAAMC,iBAAiB,GAAG,IAAIf,iBAAiB,CAC3CS,WACJ,CAAC;MAED,IAAG,CAACM,iBAAiB,CAACC,eAAe,EAAE;QACnC,oBACIb,OAAA,CAACJ,QAAQ;UACLkB,EAAE,EAAE;YACAC,QAAQ,EAAE,cAAc;YACxBC,KAAK,EAAE;cAACC,IAAI,EAAER;YAAQ;UAC1B;QAAE;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAEV;MAEA,IAAG,CAACT,iBAAiB,CAACU,eAAe,EAAC;QAClC,oBAAOtB,OAAA,CAACJ,QAAQ;UAACkB,EAAE,EAAC;QAAwB;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MACnD;MAEA,IAAG,CAACT,iBAAiB,CAACW,KAAK,CAAChB,kBAAkB,CAAC,EAAE;QAC7C,oBAAOP,OAAA,CAACJ,QAAQ;UAACkB,EAAE,EAAC;QAAM;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MACjC;MAEA,oBACIrB,OAAA,CAACF,MAAM;QAAA,GAAKa,KAAK;QAAAa,QAAA,eACbxB,OAAA,CAACK,SAAS;UAAA,GAAKM;QAAK;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpB,CAAC;IAEjB;EAAE;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEV;AAAClB,EAAA,CA5CuBF,YAAY;EAAA,QAMfP,WAAW;AAAA;AAAA+B,EAAA,GANRxB,YAAY;AAAA,IAAAwB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}